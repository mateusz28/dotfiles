#!/bin/bash
TO_ADD=$(fgst | xargs)
if [ -z "$TO_ADD" ]; then
  echo "To add list empty"
  exit 0
fi

for file in $TO_ADD; do
  # Only reset if file exists in HEAD or working tree
  if git cat-file -e "HEAD:$file" 2>/dev/null || [ -e "$file" ]; then
    git reset "$file"
  else
    echo "Skipping '$file': not present in working tree or HEAD"
  fi
done
